task: aggregation-period-keys
instructions: |
  This task  is about the Analytics Engine  in `src/analytics/AggregationPeriodKeysEngine.ts`. The formatting of date is not correct  at given point and it spoiling up the aggregation
  for hour/day/week. The keys it creates do not arrange in increasing order completely  because the month/day/hour format
  parts are not padded, and month is also coming out 0 based. Looks like everything
  is using the normal Date getters instead of the UTC ones too. So according to it where
  the code is running , you can get multiple types of  results, which obviously is not good and is not satisfying expectations.

  Another thing is that the metric filtering is dropping events that fall exactly on  the
  start time or end time. The conditions are using > and < , so a metric that happens right
  at the boundary gets ignored.

  You only go through these two functions. first is getPeriodKey(timestamp, period) and other is getMetrics(name, startTime?, endTime?)

  What i need to expect is 
  use UTC date methods everywhere so that getUTCFullYear, getUTCMonth and all other functions of this type.
  month should be 1 to 12 , it means plus 1 in utc month
  anything going into the key should be padded , it means each month is of two digit , date is of two digit , hour is of two digit. year should be 4 digits YYYY format, which getUTCFullYear already provides
  weekly keys should point to the Monday for that week. if it is Sunday still map to the same Monday not the next one
  the time filter should include boundaries, so `>= startTime` and `<= endTime`

  Don't change method signatures or return types. Existing metric data should still be usable once the formatting is corrected.

author_name: Adzzat
author_email: aryanhonawar@gmail.com
difficulty: medium
category: analytics
tags: [date-formatting, aggregation, string-formatting]
parser_name: pytest





























